---
title: Response patching
---

**Response patching** is a technique when a mocked response is based on the actual response. This technique may be useful when working with an existing API with an intention to augment it for various purposes (i.e., experimenting or debugging).

Performing a response patching with Mock Service Worker is a question of getting an actial response inside the respons resolver. There is a dedicated utility called `ctx.fetch()` designed for that purpose. Using `ctx.fetch()` allows to perform requests that are **bypassed by any request handlers**.

## Example

Below is an example of response patching in a handler that mocks a user detail request from GitHub API.

```js
import { composeMocks, rest } from 'msw'

const { start } = composeMocks(
  rest.get('https://api.github.com/users/:username', async (req, res, ctx) => {
    // Perform an original request to the intercepted request URL
    const originalResponse = await ctx.fetch(req)

    return res(
      ctx.json({
        location: originalResponse.location,
        firstName: 'Not the real first name',
      }),
    )
  }),
)

start()
```

> It is highly recommended to use `ctx.fetch()` instead of a regular `fetch()` within response resolvers, because it prevents actual requests **from being matched against the MSW mocks definition**.
>
> You may use `fetch()` intentionally, for example, when you need to perform a request that is later mocked as a part of another response resolver. Requests issued by regular `fetch()` are subjected to mocking.

Given the mock definition above, if you performed the following request,

```js
fetch('https://api.github.com/users/octocat')
```

this is the patched mock response you would get:

```json
{
  "location": "San Francisco",
  "firstName": "Not the real first name"
}
```
