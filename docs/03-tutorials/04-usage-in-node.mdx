---
title: Usage in Node
---

Despite Mock Service Worker relying on the Service Worker API, which cannot run in a browser, the library provides a NodeJS-compatible API that allows you to reuse the same mocking logic for unit and integration tests.

<Hint>
  When running in Node, Mock Service Worker intercepts requests performed by
  http/https/XMLHttpRequest.
</Hint>

## Mock definition

```js showLineNumbers
import { rest } from 'msw'

export default [
  //
  rest.get('/user', (req, res, ctx) => {
    return res(
      ctx.json({
        firstName: 'John',
        age: 32,
      }),
    )
  }),
]
```

## Usage

Here's a usage example with [Jest](https://jestjs.io), but you can use any testing framework to your liking (ava, mocha, etc.).

```js showLineNumbers focusedLines=1,5,8-10,14-15
import { setupServer } from 'msw'
import handlers from './handlers'

describe('User detail', () => {
  let server

  beforeAll(async () => {
    // Set up requests interception using previously defined handlers
    server = setupServer(handlers)
    server.listen()
  })

  afterAll(() => {
    // Restore the mocked instances
    return server.close()
  })

  describe('given I request a user detail', () => {
    let res

    beforeAll(async () => {
      res = await fetch('/user')
    })

    it('should return a user info', () => {
      expect(res).toEqual({
        firstName: 'John',
        age: 32,
      })
    })
  })
})
```
