---
title: Mocking REST API
---

This tutorial is going to take you through the process of mocking a REST API using Mock Service Worker. It assumes you have completed the [Getting started](/docs/tutorials/getting-started) tutorial, and have the `msw` package installed in your project.

## Imports

Create a new file that will contain our mocking logic. In this tutorial we are going to create a `mocks.js` file.

```bash
$ touch src/mocks.js
```

Next, import the following pieces from the `msw` package:

```js
// src/mocks.js
import { setupWorker, rest } from 'msw'
```

Briefly, this is what each of them is needed for:

- `setupWorker()`, a function that composes a list of [request handlers](/docs/basics/request-handler);
- `rest`, a namespace that contains utility functions for mocking a REST API.

## Mock definition

Describe which endpoints to mock by providing respective calls of `rest[METHOD]` as the arguments to `setupWorker()` function.

For example, to mock a `GET` request we would use `rest.get()`. This function call will accept a URL predicate as an argument, so any requests matching that predicate would be mocked.

```js showLineNumbers focusedLines=4
// src/mocks.js
import { setupWorker, rest } from 'msw'

setupWorker(rest.get('/user/:userId', null))
```

> Request URL predicate above uses a path parameter (`:userId`). It's a placeholder for a dynamic part of the URL. For example, given a `/user/abc-123` URL, the `userId` parameter would equal `"abc-123"`.
>
> Learn more about [Path matching](/docs/basics/path-matching).

In the code above we have defined what is called **a request handler** for any `GET` requests that match `/user/:userId` path. Similarly, you can call `rest.post()` to mock a `POST` request, etc.

> **TODO:** Reference `rest` namespace?

## Response resolver

Notice how our second argument to `rest.get()` function call is `null`. Let's change that.

Provide a **response resolver** to the existing `rest.get()` handler. To do so, pass a new function as the second argument to that handler. This new resolver function accepts three arguments:

- `req`, an information about a matching request;
- `res`, a functional utility to compose the mocked response;
- `ctx`, a group of utilities to help you get the response you need.

Here's how we will resolve a mocked response:

```js showLineNumbers focusedLines=6-15
// src/mocks.js
import { setupWorker, rest } from 'msw'

setupWorker(
  rest.get('/user/:userId', (req, res, ctx) => {
    // Access the value of "userId" parameter
    const { userId } = req.params

    return res(
      ctx.status(200),
      ctx.json({
        id: userId,
        firstName: 'John',
        age: 32,
      }),
    )
  }),
)
```

Let's analyze what's happening in this code step by step.

First, let's start with the `rest.get('/users')` request handler. Its response resolver returns the call to the `res` function, which describes how to mock the response. In our case we pass two calls to context utilities as the arguments to that `res` function call:

- `ctx.status(403)`, to return the response with the status code 403;
- `ctx.json([...])`, to return an "application/json" type body containing two mocked objects that represent users.

> Response resolvers execute client-side. Reuse your application's logic, or include third-party libraries to supercharge your mocking!

## Running Service Worker

The result of calling the `setupWorker()` function is a public API object that contains the `start()` method. This method registers and activates the Service Worker responsible for requests interception and mocking.

Call the `start()` function returned from the previous `setupWorker()` invocation.

```js showLineNumbers focusedLines=4,11
// src/mocks.js
import { setupWorker, rest } from 'msw'

const worker = setupWorker(
  // Our request handlers declared previously
  rest.get('/users', ...),
  rest.put('/posts/:postId', ...)
)

// Calling the "start" function launches the Service Worker
worker.start()
```

Once you refresh the page, you will see the confirmation message in the browser's console. Any requests matching the defined request handlers are now mocked.

## Verify & Inspect

Perform a request that matches our request handlers from `mocks.js` and see the observe the mocked response right in your browser's "Network" tab:

> TODO Add image

<ResponsePreview
  request={{
    method: 'GET',
    url: '/user/**abc-123**',
  }}
  response={{
    statusCode: 200,
    body: `
{
  "id": "abc-123",
  "firstName": "John",
  "age": 32
}
    `,
  }}
/>
